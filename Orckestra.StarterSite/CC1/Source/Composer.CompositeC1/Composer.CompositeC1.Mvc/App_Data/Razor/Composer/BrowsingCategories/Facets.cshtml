@using Orckestra.Composer.Providers
@using Orckestra.Composer.Search.Context
@inherits Composite.AspNet.Razor.RazorFunction

@functions {
    public override string FunctionDescription
    {
        get { return "Facets search."; }
    }

    public IBrowseCategoryRequestContext BrowseCategoryRequestContext { get; set; }
    public ICategoryMetaContext CategoryMetaContext { get; set; }
    public ILocalizationProvider LocalizationProvider { get; set; }
}

@{
    var searchViewModel = Facets.Requests.BrowseCategories.GetSearchViewModel(BrowseCategoryRequestContext, CategoryMetaContext);
    var productSearchResults = searchViewModel?.ProductSearchResults;
}

@Facets.Facets.Render(productSearchResults, LocalizationProvider);

