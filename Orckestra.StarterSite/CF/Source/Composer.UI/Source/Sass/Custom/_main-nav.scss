.main-nav {
  // reset positions
  .nav, .collapse, .dropup, .dropdown-container {
    position: static;
  }
  // propagate menu position under container for fw navbars
  .container {
    position: relative;
    padding: 0;
  }
  // by default aligns menu to left
  .dropdown-menu {
    left: auto;
  }
  // Content with padding
  &-content {
    padding: 20px 30px;

    ul p {
      border-bottom: 1px solid gray("400");
      padding-bottom: $grid-gutter-width/2;
    }
  }

  // Fullwidth menu
  .dropdown-container.main-nav-fw .dropdown-menu {
    left: 0;
    right: 0;
  }

  .dropdown-container > a::after {
    content: none;
  }

  &-toggle {
    border: none;
    float: left;
    margin-right: 0;
    padding: 7px 10px;
  }

  // Mobile version
  @include media-breakpoint-down(sm) {
    //margin: -$grid-gutter-width 0 0;

    //the mobile menu will follow the sticky navbar
    position: fixed;
    top: 42px; //computed height of the navbar
    z-index: 100;
    left: 0;
    width: 100%;

    //main nav over the content and not pushing the content
    .main-nav-menu {
      position: absolute;
      width: 100%;
      background: #fff;
      z-index: 100;
      margin: 0;
      padding-left: 0;
      padding-right: 0;
    }

    ul,
    &-content,
    &-content ul p,
    .row,
    li {
      margin: 0;
      padding: 0;

      &.open > a {
        background: #fff;
      }
    }

    &-content {
      margin-left: -$dropdown-item-padding-y;
      margin-right: -$dropdown-item-padding-y;

      ul p {
        border-bottom: 1px solid #fff;
      }

      li {
        a, span {
          background-color: gray("200");
          display: block;
          padding: $dropdown-item-padding-y $dropdown-item-padding-x;
        }
        a:hover,
        a:focus {
          background-color: gray("400");
          border-color: $link-color;
        }

        p a,
        p span {
          padding: $dropdown-item-padding-y $dropdown-item-padding-x;
        }
      }
    }

    .dropdown-container > a {
      border-bottom: 1px solid gray("200");
      padding-right: $dropdown-item-padding-x;
      position: relative;
    }

    .fa {
      margin-top: -7px;
      position: absolute;
      right: $dropdown-item-padding-y;
      top: 50%;
    }

    .fa-chevron-down {
      display: block;
    }
    .fa-chevron-up {
      display: none;
    }

    .open {
      .fa-chevron-down {
        display: none;
      }
      .fa-chevron-up {
        display: block;
      }
    }
  }

  @include media-breakpoint-down(sm) {
    .main-nav-menu {
      overflow: hidden;
    }

    // expand dropdown on hover
    .dropdown-menu.open {
      display: block;
      position: static;
      float: none;
      width: auto;
      margin-top: 0;
      box-shadow: none !important;
      border: 0;
    }
  }

  // Top line
  hr {
    margin-bottom: 0;
  }

  // Tablet & desktop
  @include media-breakpoint-up(md) {
    position: absolute;
    bottom: -24px;
    width: 100%;

    .dropdown-menu.open {
      display: block;
    }

    .dropdown-container > a:hover,
    .dropdown-container > a:focus,
    a.open {
      position: relative;

      &::before {
        background-color: $link-color;
        bottom: -$navbar-padding-y;
        content: '';
        height: 4px;
        left: 0;
        position: absolute;
        width: 100%;
      }
    }

    .fa {
      display: none;
    }
  }
}

.masthead {
  position: relative;

  &-with-mega-menu {
    @include media-breakpoint-up(md) {
      padding-bottom: 57px;
    }
    @include media-breakpoint-up(lg) {
      padding-bottom: 61px;
    }
  }
}

ul.main-nav-sticky {
  display: none;
  overflow: hidden;
  white-space: nowrap;

  li {
    float: left;

    a {
      background-color: transparent;
      color: #fff;
      float: left;
      position: relative;

      &:hover,
      &:focus {
        background-color: transparent;

        &::before {
          background-color: #fff;
          bottom: 0;
          content: '';
          height: 4px;
          left: 0;
          position: absolute;
          width: 100%;
        }
      }
    }
  }
  @include media-breakpoint-up(md) {
    .sps--blw & {
      display: block;
      float: left;
    }
  }
}